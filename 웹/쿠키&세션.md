# 쿠키(Cookie)

HTTP의 일종으로 사용자가 웹 사이트를 방문할 경우,   
그 사이트가 사용하고 있는 서버에서 **사용자의 컴퓨터에 저장하는 작은 기록 정보 파일**

HTTP에서 클라이언트의 상태 정보를 클라이언트의 PC에 저장하였다가 필요시 정보를 참조하거나 재사용할 수 있다.

<br>

### 쿠키 특징
1. key-value 쌍으로 구성되어있는 데이터 파일이다.
2. 이름, 값, 만료일(저장기간), 경로 정보로 구성되어 있다.
3. 클라이언트에 총 300개의 쿠키 저장 가능
4. 하나의 도메인 당 20개의 쿠키를 가질 수 있다.
5. 하나의 쿠키는 4KB까지 저장 가능

<br>

### 쿠키 작동 방식

<p align="center">
  <img src="https://doooyeon.github.io/assets/img/post/cookie-process.png" width="40%" />
</p>

1. 클라이언트가 페이지 요청
2. 서버에서 쿠키 생성
3. 생성한 쿠키에 정보를 담아 HTTP 헤더에 포함하여 응답

<br>

> - 브라우저가 종료되어도 쿠키 만료 기간이 있다면 클라이언트에서 보관하고 있음
> - 같은 요청을 할 경우 HTTP 헤더에 쿠키를 함께 보냄
> - 서버에서 쿠키를 읽어 이전 상태 정보를 변경할 필요가 있을 때, 쿠키를 업데이트하여 변경된 쿠키를 HTTP 헤더에 포함시켜 응답

<br>
<hr>

# 세션(Session)

**일정 시간동안 같은 사용자로부터 들어오는 일련의 요구를 하나의 상태로 보고, 그 상태를 유지시키는 기술**

> 일정 시간 : 방문자가 웹 브라우저를 통해 웹 서버에 접속한 시점부터 웹 브라우저를 종료하여 연결을 끝내는 시점

<br>

### 세션 특징
1. 웹 컨테이너의 상태를 유지하기 위한 정보 저장
2. 웹 서버에 저장되는 쿠키(= 세션 쿠키)
3. 브라우저를 닫거나, 서버에서 세션을 삭제했을 때만 삭제가 되므로, 쿠키보다 비교적 보안이 좋다.
4. 저장 데이터에 제한이 없다. (서버 용량이 허용하는 한)
5. 각 클라이언트에 고유 Session ID를 부여한다.<br>Session ID로 클라이언트를 구분해 각 요구에 맞는 서비스를 제공
6. 사용자가 많아질수록 서버 메모리를 많이 차지하게 된다.

<br>

### 세션 작동 방식

<p align="center">
  <img src="https://doooyeon.github.io/assets/img/post/session-process.png" width="60%" />
</p>

1. 클라이언트가 서버에 접속 시 session-id 발급 받음
2. 클라이언트는 session-id에 대해 쿠키를 사용해 저장
3. 서버에 요청 시, session-id를 같이 서버에 전달해서 요청
4. 서버는 session-id를 전달 받아 session-id를 사용해 세션에 있는 클라이언트 정보를 가져와 사용
5. 클라이언트 정보를 가지고 서버 요청을 처리하여 클라이언트에게 응답

<br>

## 쿠키와 세션의 차이

- 쿠키는 클라이언트에 저장되지만, 세션은 서버에 저장된다.
- 보안 면에서는 세션이 더 우수하며, 요청 속도는 쿠키가 세션보다 더 빠르다.
- 세션은 서버의 자원을 사용하기에 서버 자원에 한계가 있고, 속도가 느려질 수 있기 때문에 자원관리 차원에서 **쿠키와 세션을 적절한 요소 및 기능에 맞게 병행 사용해야 한다.**

<br>

## 

[출처] <br>

- [링크](https://dev-coco.tistory.com/61)
- [링크](https://interconnection.tistory.com/74)
- [이미지 출처](https://doooyeon.github.io/2018/09/10/cookie-and-session.html)
